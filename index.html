<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Mental WorkerManAI</title>
    <style>
        @font-face {
            font-family: 'Old English Text MT';
            src: url('https://db.onlinewebfonts.com/t/10100c8172c1ce8df6481d20080d9991.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        
        @font-face {
            font-family: 'Modern Aesthetic';
            src: url('https://db.onlinewebfonts.com/t/1c587cd97662762b24664212f5788a96.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background-color: #0f0f1a;
            font-family: 'Modern Aesthetic', sans-serif;
            height: 100vh;
            position: relative;
            cursor: grab;
            color: #ffffff;
        }
        
        body:active {
            cursor: grabbing;
        }
        
        #mindmap-container {
            width: 100%;
            height: 100%;
            position: relative;
            transform-origin: center center;
        }
        
        #center-title {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Old English Text MT', serif;
            font-size: 4.2rem; /* Increased by 20% from 3.5rem */
            color: #b1afe3;
            text-align: center;
            pointer-events: none;
            z-index: 10;
            text-shadow: 0 0 10px rgba(177, 175, 227, 0.5);
            opacity: 1;
        }
        
        #search-container {
            position: absolute;
            top: calc(50% + 50px);
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            width: 300px;
        }
        
        #search-input {
            width: 100%;
            padding: 10px 15px;
            background-color: rgba(25, 25, 35, 0.7);
            border: 1px solid #8995ca;
            border-radius: 25px;
            color: #fff;
            font-family: 'Modern Aesthetic', sans-serif;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
            outline: none;
            transition: all 0.3s ease;
        }
        
        #search-input:focus {
            box-shadow: 0 0 10px rgba(137, 149, 202, 0.5);
            transform: scale(1.02);
        }
        
        .concept {
            position: absolute;
            padding: 10px 16px;
            border-radius: 25px;
            background: transparent;
            cursor: pointer;
            transition: transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1.0), color 0.3s ease-out; /* Separate transitions for better control */
            color: #8995ca;
            font-size: 0.95rem; /* Tamaño base más pequeño */
            font-family: 'Modern Aesthetic', sans-serif;
            white-space: nowrap;
            will-change: transform, left, top;
            opacity: 0.85; /* Ligeramente más transparente por defecto */
            z-index: 5;
            user-select: none; /* Prevenir selección de texto durante arrastre */
        }
        
        /* Estilo para cuando se está arrastrando */
        .concept:active {
            cursor: grabbing;
            z-index: 10;
            opacity: 1;
        }
        
        .concept:hover {
            transform: scale(1.05);
            text-shadow: 0 0 8px rgba(137, 149, 202, 0.8);
            color: #a7b2e0;
            z-index: 6;
        }
        
        .concept.active {
            transform: scale(1.1);
            text-shadow: 0 0 10px rgba(137, 149, 202, 1);
            color: #b1afe3;
            z-index: 7;
        }
        
        
        /* Estilo especial para "Únete Ahora" - mucho más grande y llamativo */
        .concept.special {
            background-color: #8995ca;
            color: #ffffff;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
            box-shadow: 0 0 20px rgba(137, 149, 202, 1);
            border: 2px solid #ffffff;
            animation: pulse 2s infinite;
            font-size: 1.3rem;
            letter-spacing: 1px;
            padding: 12px 22px;
            opacity: 1;
            z-index: 8;
        }
        
        .concept.special:hover {
            background-color: #b1afe3;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(177, 175, 227, 1);
        }
        
        /* Quitar estilos especiales y dejar solo variación de tamaño */
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        #content-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%; /* Increased from 80% */
            max-width: 1000px; /* Increased from 700px */
            max-height: 90vh; /* Increased from 80vh */
            background-color: white;
            border-radius: 15px;
            padding: 40px; /* Increased from 30px */
            z-index: 20;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow-y: auto;
            font-family: 'Modern Aesthetic', sans-serif;
        }
        
        #modal-title {
            font-size: 2.2rem; /* Increased from 2rem */
            color: #8995ca;
            margin-bottom: 25px; /* Increased from 20px */
            border-bottom: 2px solid rgba(137, 149, 202, 0.2);
            padding-bottom: 18px; /* Increased from 15px */
        }
        
        #modal-content {
            font-size: 1.2rem; /* Increased from 1.1rem */
            line-height: 1.7; /* Increased from 1.6 */
            color: #333;
            padding-right: 15px; /* Added padding for better readability with scrollbar */
        }
        
        #modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            color: #8995ca;
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        #modal-close:hover {
            color: #b1afe3;
        }
        
        #backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 15;
        }
        
        #search-results {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            background-color: rgba(25, 25, 35, 0.9);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin-top: 10px;
            display: none;
            z-index: 11;
            border: 1px solid #8995ca;
        }
        
        .search-result {
            padding: 12px 15px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            color: #fff;
            border-bottom: 1px solid rgba(137, 149, 202, 0.2);
        }
        
        .search-result:hover {
            background-color: rgba(137, 149, 202, 0.3);
            color: #b1afe3;
        }
        
        .search-result:last-child {
            border-bottom: none;
        }
        
        #zoom-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 10;
            display: flex;
            gap: 10px;
        }
        
        .zoom-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(20, 20, 35, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #a7b2e0;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(137, 149, 202, 0.3);
            transition: all 0.2s ease;
        }
        
        .zoom-btn:hover {
            background-color: rgba(30, 30, 50, 0.8);
            transform: scale(1.05);
            color: #c4d1ff;
        }
        
        .zoom-level {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 15px;
            height: 40px;
            background-color: rgba(20, 20, 35, 0.7);
            border-radius: 20px;
            font-size: 14px;
            color: #a7b2e0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(137, 149, 202, 0.3);
        }
        
        #language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
        
        #lang-btn {
            background-color: rgba(20, 20, 35, 0.7);
            color: #a7b2e0;
            border: 1px solid rgba(137, 149, 202, 0.3);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            font-family: 'Modern Aesthetic', sans-serif;
        }
        
        #lang-btn:hover {
            background-color: rgba(30, 30, 50, 0.8);
            transform: scale(1.05);
            color: #c4d1ff;
        }
    </style>
</head>
<body>
    <div id="mindmap-container">
        <h1 id="center-title">WorkerManAI</h1>
        <div id="search-container">
            <input type="text" id="search-input" placeholder="Buscar conceptos...">
            <div id="search-results"></div>
        </div>
        <canvas id="canvas"></canvas>
    </div>
    
    <div id="zoom-controls">
        <button class="zoom-btn" id="zoom-out">-</button>
        <div class="zoom-level" id="zoom-level">100%</div>
        <button class="zoom-btn" id="zoom-in">+</button>
    </div>
    
    <div id="language-toggle">
        <button id="lang-btn">EN / ES</button>
    </div>
    
    <div id="backdrop"></div>
    <div id="content-modal">
        <h2 id="modal-title"></h2>
        <div id="modal-content"></div>
        <button id="modal-close">×</button>
    </div>

    <script>
        // Current language
        let currentLanguage = 'es';
        
        // Translations for UI elements
        const uiTranslations = {
            es: {
                searchPlaceholder: "Buscar conceptos..."
            },
            en: {
                searchPlaceholder: "Search concepts..."
            }
        };
        
        // Datos del mapa mental
        const concepts = [
            {
                id: 'what-is-it',
                title_es: '¿Qué es?',
                title_en: 'What is it?',
                description_es: `<p>WorkerManAI es un agente de inteligencia artificial avanzado impulsado por la tecnología DeepSeek, específicamente diseñado para ayudar a estudiantes automatizando tareas académicas.</p>
                              <p>Es una herramienta revolucionaria que puede crear varios tipos de contenido académico incluyendo informes, guías, presentaciones, tesis y más - todo mientras sigue instrucciones específicas, rúbricas o requisitos proporcionados por el usuario.</p>
                              <p>Piensa en él como tu asistente académico personal que trabaja incansablemente para ayudarte a completar tus tareas con calidad profesional, ahorrándote tiempo valioso en el proceso.</p>`,
                description_en: `<p>WorkerManAI is an advanced artificial intelligence agent powered by DeepSeek technology, specifically designed to help students by automating academic tasks.</p>
                              <p>It's a revolutionary tool that can create various types of academic content including reports, guides, presentations, theses, and more - all while following specific instructions, rubrics, or requirements provided by the user.</p>
                              <p>Think of it as your personal academic assistant that works tirelessly to help you complete your assignments with professional quality, saving you valuable time in the process.</p>`,
                weight: 1.0
            },
            {
                id: 'what-can-it-do',
                title_es: '¿Qué puede hacer?',
                title_en: 'What can it do?',
                description_es: `<p>WorkerManAI es capaz de realizar una amplia gama de tareas académicas:</p>
                              <ul>
                                <li>Crear informes detallados siguiendo requisitos específicos de formato (como APA)</li>
                                <li>Desarrollar presentaciones de PowerPoint con estructura adecuada y elementos visuales</li>
                                <li>Generar trabajos de investigación completos con citas y referencias</li>
                                <li>Escribir tesis con perspectivas o argumentos específicos</li>
                                <li>Producir informes científicos o matemáticos con información precisa</li>
                                <li>Acceder a Internet para recopilar información relevante y actualizada</li>
                                <li>Añadir imágenes apropiadas para mejorar el contenido visual</li>
                                <li>Seguir rúbricas o instrucciones detalladas para cumplir con los requisitos de la tarea</li>
                              </ul>
                              <p>Todo el contenido se crea con alta calidad, organización adecuada y atención al detalle.</p>`,
                description_en: `<p>WorkerManAI is capable of performing a wide range of academic tasks:</p>
                              <ul>
                                <li>Creating detailed reports following specific formatting requirements (such as APA)</li>
                                <li>Developing PowerPoint presentations with appropriate structure and visual elements</li>
                                <li>Generating complete research papers with citations and references</li>
                                <li>Writing theses with specific perspectives or arguments</li>
                                <li>Producing scientific or mathematical reports with accurate information</li>
                                <li>Accessing the Internet to collect relevant and up-to-date information</li>
                                <li>Adding appropriate images to enhance visual content</li>
                                <li>Following detailed rubrics or instructions to meet assignment requirements</li>
                              </ul>
                              <p>All content is created with high quality, proper organization, and attention to detail.</p>`,
                weight: 0.9
            },
            {
                id: 'what-cant-it-do',
                title_es: "¿Qué no puede hacer?",
                title_en: "What can't it do?",
                description_es: `<p>Aunque WorkerManAI es potente, tiene ciertas limitaciones:</p>
                              <ul>
                                <li>No puede asistir físicamente a clases o realizar exámenes por ti</li>
                                <li>No puede garantizar que el contenido esté completamente libre de plagio (siempre revisa y haz ediciones)</li>
                                <li>No puede reemplazar el proceso de aprendizaje ni ayudarte a desarrollar habilidades de pensamiento crítico</li>
                                <li>No puede garantizar calificaciones perfectas (ya que los criterios de evaluación pueden variar según el instructor)</li>
                                <li>No puede crear contenido para propósitos académicos deshonestos (verifica las políticas de tu institución)</li>
                                <li>No puede proporcionar tutoría en tiempo real ni responder preguntas durante un examen</li>
                                <li>No puede acceder a bases de datos restringidas o materiales que requieran credenciales especiales</li>
                              </ul>
                              <p>WorkerManAI está diseñado para ser una herramienta de eficiencia, no un reemplazo para la educación en sí.</p>`,
                description_en: `<p>Although WorkerManAI is powerful, it has certain limitations:</p>
                              <ul>
                                <li>It cannot physically attend classes or take exams for you</li>
                                <li>It cannot guarantee that content is completely free of plagiarism (always review and make edits)</li>
                                <li>It cannot replace the learning process or help you develop critical thinking skills</li>
                                <li>It cannot guarantee perfect grades (as evaluation criteria may vary by instructor)</li>
                                <li>It cannot create content for dishonest academic purposes (check your institution's policies)</li>
                                <li>It cannot provide real-time tutoring or answer questions during an exam</li>
                                <li>It cannot access restricted databases or materials that require special credentials</li>
                              </ul>
                              <p>WorkerManAI is designed to be an efficiency tool, not a replacement for education itself.</p>`,
                weight: 0.5 // Reduced to make this concept smaller
            },
            {
                id: 'how-to-use',
                title_es: '¿Cómo usarlo correctamente?',
                title_en: 'How to use it correctly?',
                description_es: `<p>Para obtener los mejores resultados de WorkerManAI:</p>
                              <ol>
                                <li>Proporciona instrucciones claras y detalladas, incluyendo requisitos de la tarea, número de palabras, estilo de formato, etc.</li>
                                <li>Incluye la rúbrica o criterios de calificación si están disponibles</li>
                                <li>Especifica cualquier punto de vista o perspectiva particular que desees que tenga la tarea</li>
                                <li>Menciona cualquier fuente específica que deba incluirse</li>
                                <li>Permite tiempo de procesamiento suficiente para tareas complejas</li>
                                <li>Revisa el contenido generado y haz ediciones personales para añadir tu voz</li>
                                <li>Usa el contenido como una base sobre la que puedes construir y personalizar</li>
                                <li>Siempre verifica hechos y citas antes de entregar</li>
                              </ol>
                              <p>Recuerda que la calidad del resultado depende en gran medida de la claridad y exhaustividad de tus instrucciones de entrada.</p>`,
                description_en: `<p>To get the best results from WorkerManAI:</p>
                              <ol>
                                <li>Provide clear and detailed instructions, including task requirements, word count, formatting style, etc.</li>
                                <li>Include the rubric or grading criteria if available</li>
                                <li>Specify any particular viewpoint or perspective you want the assignment to have</li>
                                <li>Mention any specific sources that should be included</li>
                                <li>Allow sufficient processing time for complex tasks</li>
                                <li>Review the generated content and make personal edits to add your voice</li>
                                <li>Use the content as a foundation upon which you can build and customize</li>
                                <li>Always verify facts and citations before submitting</li>
                              </ol>
                              <p>Remember that the quality of the result depends largely on the clarity and thoroughness of your input instructions.</p>`,
                weight: 0.85
            },
            {
                id: 'tips-for-use',
                title_es: 'Consejos de uso',
                title_en: 'Usage tips',
                description_es: `<p>Aprovecha al máximo WorkerManAI con estos consejos profesionales:</p>
                              <ul>
                                <li>Divide las tareas complejas en solicitudes más pequeñas y manejables</li>
                                <li>Siempre revisa y personaliza el contenido generado para reflejar tu propio estilo de escritura</li>
                                <li>Utiliza el tiempo ahorrado para comprender profundamente la materia</li>
                                <li>Ten a mano las instrucciones de la tarea cuando hagas tu solicitud</li>
                                <li>Para presentaciones, especifica la audiencia y la duración de la presentación</li>
                                <li>Solicita esquemas antes de las tareas completas para asegurar que la dirección sea correcta</li>
                                <li>Guarda y organiza el contenido generado por IA para referencia futura</li>
                                <li>Usa la herramienta para generar materiales de estudio o resúmenes de temas complejos</li>
                                <li>Comienza temprano en lugar de esperar hasta el último minuto</li>
                              </ul>
                              <p>La herramienta funciona mejor cuando la usas de manera estratégica y reflexiva.</p>`,
                description_en: `<p>Get the most out of WorkerManAI with these professional tips:</p>
                              <ul>
                                <li>Break complex tasks into smaller, more manageable requests</li>
                                <li>Always review and customize generated content to reflect your own writing style</li>
                                <li>Use the time saved to deeply understand the subject matter</li>
                                <li>Have the assignment instructions on hand when making your request</li>
                                <li>For presentations, specify the audience and duration of the presentation</li>
                                <li>Request outlines before complete tasks to ensure the direction is correct</li>
                                <li>Save and organize AI-generated content for future reference</li>
                                <li>Use the tool to generate study materials or summaries of complex topics</li>
                                <li>Start early rather than waiting until the last minute</li>
                              </ul>
                              <p>The tool works best when you use it strategically and thoughtfully.</p>`,
                weight: 0.8
            },
            {
                id: 'how-to-access',
                title: '¿Cómo acceder?',
                description: `<p>Acceder a WorkerManAI es simple y conveniente:</p>
                              <ol>
                                <li>Regístrate para obtener una cuenta en nuestro sitio web oficial</li>
                                <li>Elige un plan de suscripción que se ajuste a tus necesidades</li>
                                <li>Una vez registrado, puedes acceder a WorkerManAI a través de:
                                  <ul>
                                    <li>Nuestra plataforma web (funciona en cualquier navegador)</li>
                                    <li>Nuestra aplicación móvil dedicada (iOS y Android)</li>
                                    <li>Integración con WhatsApp (envía mensajes directamente a nuestra IA)</li>
                                  </ul>
                                </li>
                                <li>Sigue las instrucciones en pantalla para enviar los detalles de tu tarea</li>
                                <li>Recibe tu tarea completada en tu formato preferido</li>
                              </ol>
                              <p>Para soporte técnico o preguntas sobre acceso, contacta a nuestro equipo de servicio al cliente a través de la sección de Soporte de nuestro sitio web.</p>`,
                weight: 0.75
            },
            {
                id: 'who-behind-it',
                title: '¿Quién está detrás?',
                description: `<p>WorkerManAI fue desarrollado por un equipo de tecnólogos educativos, especialistas en IA y ex educadores que reconocieron la necesidad de una herramienta que pudiera ayudar a los estudiantes a administrar su tiempo de manera más efectiva.</p>
                              <p>La tecnología está impulsada por DeepSeek, un sistema de IA avanzado conocido por sus notables capacidades de comprensión del lenguaje y generación de contenido.</p>
                              <p>Nuestro equipo continúa mejorando y refinando el sistema basándose en comentarios de usuarios y mejores prácticas educativas. Trabajamos estrechamente con asesores académicos para asegurar que la herramienta siga siendo útil mientras fomenta resultados de aprendizaje adecuados.</p>
                              <p>Aunque mantenemos privacidad sobre las identidades específicas de nuestro equipo de desarrollo, estamos comprometidos con la transparencia sobre cómo funciona la herramienta y cómo debe usarse responsablemente.</p>`,
                weight: 0.65
            },
            {
                id: 'why-created',
                title_es: '¿Por qué fue creado?',
                title_en: 'Why was it created?',
                description_es: `<p>WorkerManAI fue creado en respuesta a varias observaciones sobre el sistema educativo moderno:</p>
                              <ul>
                                <li>Los estudiantes a menudo dedican tiempo excesivo a tareas que no contribuyen directamente a sus objetivos de aprendizaje más importantes</li>
                                <li>La educación tradicional se enfoca fuertemente en conocimientos técnicos pero a menudo descuida habilidades prácticas para la vida</li>
                                <li>Los jóvenes necesitan más tiempo para explorar sus intereses, desarrollar habilidades blandas cruciales y trabajar hacia metas personales</li>
                                <li>La carga actual de tareas puede ser abrumadora y contribuir al estrés y agotamiento</li>
                                <li>La gestión del tiempo es una habilidad crítica difícil de desarrollar cuando se está abrumado con tareas</li>
                              </ul>
                              <p>La visión del creador no era socavar la educación sino proporcionar una herramienta que ayude a los estudiantes a recuperar su tiempo mientras siguen cumpliendo con los requisitos académicos, permitiéndoles enfocarse en lo que realmente importa para su desarrollo personal y éxito futuro.</p>`,
                description_en: `<p>WorkerManAI was created in response to several observations about the modern education system:</p>
                              <ul>
                                <li>Students often spend excessive time on tasks that don't directly contribute to their most important learning objectives</li>
                                <li>Traditional education focuses heavily on technical knowledge but often neglects practical life skills</li>
                                <li>Young people need more time to explore their interests, develop crucial soft skills, and work toward personal goals</li>
                                <li>The current assignment load can be overwhelming and contribute to stress and burnout</li>
                                <li>Time management is a critical skill that's difficult to develop when overwhelmed with tasks</li>
                              </ul>
                              <p>The creator's vision wasn't to undermine education but to provide a tool that helps students reclaim their time while still meeting academic requirements, allowing them to focus on what truly matters for their personal development and future success.</p>`,
                weight: 0.9
            },
            {
                id: 'problem-solves',
                title: '¿Qué problema resuelve?',
                description: `<p>WorkerManAI aborda varios problemas críticos que enfrentan los estudiantes de hoy:</p>
                              <ul>
                                <li><strong>Restricciones de tiempo:</strong> Al automatizar tareas rutinarias, libera horas valiosas que pueden dedicarse a actividades más significativas</li>
                                <li><strong>Equilibrio trabajo-vida:</strong> Ayuda a los estudiantes a mantener un equilibrio más saludable entre obligaciones académicas y desarrollo personal</li>
                                <li><strong>Desarrollo desigual de habilidades:</strong> Da a los estudiantes más tiempo para desarrollar habilidades prácticas para la vida no cubiertas en currículos tradicionales (educación financiera, salud mental, etc.)</li>
                                <li><strong>Sobrecarga de tareas:</strong> Reduce el estrés y la ansiedad causados por cargas excesivas de tareas</li>
                                <li><strong>Inconsistencia en la calidad:</strong> Proporciona un estándar consistentemente alto de trabajo que cumple con los requisitos académicos</li>
                                <li><strong>Enfoque de aprendizaje:</strong> Permite a los estudiantes enfocar su energía en las materias que realmente les apasionan</li>
                              </ul>
                              <p>En lugar de reemplazar la educación, WorkerManAI se trata de optimizarla - asegurando que el tiempo y la energía se inviertan donde crearán el mayor valor para el viaje único de cada estudiante.</p>`,
                weight: 0.85
            },
            {
                id: 'intended-for',
                title: '¿Para quién está destinado?',
                description: `<p>WorkerManAI está diseñado principalmente para:</p>
                              <ul>
                                <li><strong>Estudiantes de 14-25 años</strong> en entornos de secundaria, bachillerato o universidad</li>
                                <li>Personas con múltiples responsabilidades (trabajo, familia, actividades extracurriculares) que necesitan optimizar su tiempo</li>
                                <li>Estudiantes que quieren sobresalir académicamente mientras tienen tiempo para perseguir pasiones e intereses personales</li>
                                <li>Jóvenes que buscan desarrollar habilidades prácticas para la vida junto con su educación formal</li>
                                <li>Estudiantes que trabajan mejor con plantillas estructurales o que necesitan asistencia organizando sus pensamientos</li>
                                <li>Aquellos que quieren reducir el estrés académico mientras mantienen trabajo de calidad</li>
                              </ul>
                              <p>La herramienta es especialmente valiosa para estudiantes que reconocen que su tiempo es precioso y quieren ser intencionales sobre cómo lo gastan durante sus años formativos.</p>
                              <p>Nota: Los usuarios siempre deben adherirse a las políticas de integridad académica de su institución respecto al uso de herramientas de IA.</p>`,
                weight: 0.7
            },
            {
                id: 'is-it-cheating',
                title: '¿Es trampa?',
                description: `<p>La pregunta sobre si usar WorkerManAI constituye "trampa" es compleja y depende del contexto:</p>
                              <ul>
                                <li>Muchas instituciones tienen políticas que no han evolucionado al mismo ritmo que la tecnología</li>
                                <li>Es importante entender las políticas específicas de tu institución sobre el uso de herramientas de IA</li>
                                <li>En algunos contextos, usar WorkerManAI podría compararse con contratar a un tutor o usar un procesador de textos avanzado</li>
                                <li>La clave está en cómo se utiliza: como herramienta de aprendizaje y eficiencia vs. como método para evitar completamente el aprendizaje</li>
                                <li>Siempre recomendamos revisar, personalizar y entender el contenido generado</li>
                              </ul>
                              <p>Consideramos que WorkerManAI es una herramienta de asistencia académica, similar a calculadoras en matemáticas o software de edición en diseño. La tecnología siempre ha formado parte de la educación, y las herramientas de IA representan el siguiente paso en esta evolución.</p>`,
                weight: 0.95 // Aumentado para hacer este concepto más grande e importante
            },
            {
                id: 'ai-detection',
                title: 'Detección IA',
                description: `<p>Sobre la detección de contenido generado por IA:</p>
                              <ul>
                                <li>Las tecnologías de detección de IA están evolucionando, pero siguen siendo imperfectas</li>
                                <li>WorkerManAI utiliza técnicas avanzadas para generar contenido que mantiene un estilo natural y humano</li>
                                <li>El sistema está diseñado para minimizar patrones reconocibles típicos de la generación de IA</li>
                                <li>La revisión y personalización humana del contenido siempre ayuda a reducir la detectabilidad</li>
                                <li>Recomendamos usar la herramienta como punto de partida y luego personalizar el contenido con tu propia voz</li>
                              </ul>
                              <p>Nos mantenemos actualizados con los avances en detección de IA y continuamente mejoramos nuestros algoritmos para asegurar que el contenido generado sea de la mayor calidad y naturalidad posible.</p>`,
                weight: 0.6
            },
            {
                id: 'tool-compatibility',
                title: 'Compatibilidad herramientas',
                description: `<p>WorkerManAI ha sido diseñado para funcionar con una amplia gama de herramientas educativas:</p>
                              <ul>
                                <li>Integración con plataformas comunes como Google Docs, Microsoft Office y LMS populares</li>
                                <li>Capacidad para generar contenido en múltiples formatos (docx, pdf, pptx, etc.)</li>
                                <li>Compatibilidad con sistemas de gestión de citas como Zotero, Mendeley y EndNote</li>
                                <li>Herramientas de exportación para facilitar la entrega en plataformas educativas</li>
                                <li>Capacidad para ajustarse a diversos estilos de formato (APA, MLA, Chicago, etc.)</li>
                              </ul>
                              <p>Continuamente ampliamos nuestras capacidades de integración para asegurar que WorkerManAI se adapte perfectamente a tu flujo de trabajo académico, independientemente de las herramientas que utilices.</p>`,
                weight: 0.65
            },
            {
                id: 'teacher-conflicts',
                title: 'Conflictos profesores',
                description: `<p>Navegar las expectativas de los profesores en la era de la IA puede ser desafiante:</p>
                              <ul>
                                <li>Algunos educadores pueden tener reservas sobre el uso de herramientas de IA para tareas académicas</li>
                                <li>Es recomendable ser transparente cuando las políticas institucionales lo requieran</li>
                                <li>WorkerManAI puede usarse éticamente como herramienta de aprendizaje y eficiencia</li>
                                <li>Muchos profesores valoran la originalidad del pensamiento más que la redacción técnica</li>
                                <li>Considerar WorkerManAI como un asistente de investigación o editor, no como un reemplazo de tu pensamiento crítico</li>
                              </ul>
                              <p>La clave para evitar conflictos es entender las expectativas específicas de cada profesor y utilizar la herramienta de manera que complementa, no reemplaza, tu propio aprendizaje y desarrollo académico.</p>`,
                weight: 0.7
            },
            {
                id: 'ai-dependence',
                title: 'Dependencia IA',
                description: `<p>Como con cualquier herramienta potente, es importante considerar el riesgo de dependencia:</p>
                              <ul>
                                <li>WorkerManAI está diseñado para aumentar tus capacidades, no para reemplazarlas</li>
                                <li>Recomendamos usar la herramienta como parte de un enfoque equilibrado del trabajo académico</li>
                                <li>El valor real está en aprender a colaborar efectivamente con la IA, no en depender completamente de ella</li>
                                <li>Usa tu tiempo liberado para desarrollar habilidades que las máquinas no pueden replicar: creatividad, pensamiento crítico, inteligencia emocional</li>
                                <li>Considera establecer límites personales sobre cuándo usar la herramienta</li>
                              </ul>
                              <p>Una relación saludable con WorkerManAI implica usarlo como un recurso valioso pero manteniendo tu autonomía intelectual y desarrollo de habilidades fundamentales.</p>`,
                weight: 0.65
            },
            {
                id: 'false-information',
                title: 'Información falsa',
                description: `<p>Sobre la precisión de la información generada:</p>
                              <ul>
                                <li>Aunque WorkerManAI está diseñado para proporcionar información precisa, ningún sistema de IA es infalible</li>
                                <li>Siempre recomendamos verificar hechos y datos críticos, especialmente para trabajos de investigación</li>
                                <li>El sistema utiliza fuentes actualizadas pero puede haber limitaciones en ciertos temas especializados</li>
                                <li>Para trabajos académicos rigurosos, usa la herramienta como punto de partida para tu investigación</li>
                                <li>La revisión crítica del contenido generado es parte del proceso de usar la herramienta responsablemente</li>
                              </ul>
                              <p>Estamos constantemente mejorando nuestros sistemas para reducir la generación de información incorrecta, pero la verificación humana sigue siendo una parte importante del proceso.</p>`,
                weight: 0.7
            },
            {
                id: 'life-purpose',
                title: 'Propósito vida',
                description: `<p>WorkerManAI no solo se trata de completar tareas académicas, sino de liberar tiempo para descubrir tu propósito:</p>
                              <ul>
                                <li>Al automatizar tareas rutinarias, creas espacio para exploración personal y autodescubrimiento</li>
                                <li>El tiempo liberado puede invertirse en actividades que realmente alimentan tu pasión y propósito</li>
                                <li>Muchos usuarios reportan redescubrir intereses que habían abandonado debido a limitaciones de tiempo</li>
                                <li>La herramienta puede ayudarte a mantener el equilibrio mientras exploras diferentes caminos e intereses</li>
                                <li>A veces, encontrar tu propósito requiere tiempo para reflexionar y experimentar, algo escaso en el ritmo académico tradicional</li>
                              </ul>
                              <p>En cierto sentido, WorkerManAI no es solo una herramienta para tareas escolares: es una herramienta para desbloquear tu potencial humano al liberarte de lo mecánico y darte espacio para lo significativo.</p>`,
                weight: 0.8
            },
            {
                id: 'secret-community',
                title: 'Comunidad secreta',
                description: `<p>Entre los usuarios de WorkerManAI ha surgido una especie de comunidad:</p>
                              <ul>
                                <li>Usuarios en todo el mundo comparten estrategias, tips y experiencias sobre cómo maximizar el potencial de la herramienta</li>
                                <li>Muchos reportan sentirse parte de un movimiento que está redefiniendo la relación entre educación y tecnología</li>
                                <li>Existen grupos de estudio y comunidades online donde los usuarios colaboran en proyectos y se apoyan mutuamente</li>
                                <li>Algunos usuarios se convierten en "pioneros" ayudando a otros a adoptar un enfoque más equilibrado del trabajo académico</li>
                                <li>La comunidad valora el uso ético y el crecimiento personal por encima del simple atajo académico</li>
                              </ul>
                              <p>Esta comunidad representa un nuevo paradigma donde la tecnología no solo se usa para cumplir con requisitos, sino para transformar fundamentalmente cómo aprendemos y crecemos.</p>`,
                weight: 0.6
            },
            {
                id: 'join-now',
                title_es: 'Únete Ahora',
                title_en: 'Join Now',
                description_es: `<p>¡No esperes más para transformar tu vida académica!</p>
                              <p>Únete a WorkerManAI y comienza a experimentar los beneficios:</p>
                              <ul>
                                <li>Acceso inmediato a todas las herramientas y funciones</li>
                                <li>Soporte prioritario para tus consultas</li>
                                <li>Actualizaciones regulares con nuevas capacidades</li>
                                <li>Comunidad de usuarios para compartir tips y experiencias</li>
                              </ul>
                              <p>Haz clic para registrarte y dar el primer paso hacia una educación más equilibrada y productiva.</p>
                              <p><a href="join.html" class="join-button" style="display: inline-block; background-color: #8995ca; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 10px;">ÚNETE AHORA</a></p>`,
                description_en: `<p>Don't wait any longer to transform your academic life!</p>
                              <p>Join WorkerManAI and start experiencing the benefits:</p>
                              <ul>
                                <li>Immediate access to all tools and features</li>
                                <li>Priority support for your queries</li>
                                <li>Regular updates with new capabilities</li>
                                <li>User community to share tips and experiences</li>
                              </ul>
                              <p>Click to register and take the first step towards a more balanced and productive education.</p>
                              <p><a href="join.html" class="join-button" style="display: inline-block; background-color: #8995ca; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: bold; margin-top: 10px;">JOIN NOW</a></p>`,
                weight: 1.0,
                isSpecial: true
            },
            {
                id: 'anonymous-use',
                title: 'Anonimato uso',
                description: `<p>Entendemos la importancia de la privacidad en el uso de WorkerManAI:</p>
                              <ul>
                                <li>Tu uso de la plataforma se mantiene completamente confidencial</li>
                                <li>No compartimos información de usuarios con instituciones educativas</li>
                                <li>Los datos de las tareas se procesan con estrictas protecciones de privacidad</li>
                                <li>Ofrecemos opciones de pago que mantienen tu anonimato</li>
                                <li>No retenemos contenido generado más allá del tiempo necesario para el servicio</li>
                              </ul>
                              <p>Creemos que cada estudiante tiene derecho a explorar herramientas que mejoren su productividad sin temor a repercusiones injustas. Nuestra política de privacidad está diseñada para proteger tu autonomía académica mientras usas nuestros servicios.</p>`,
                weight: 0.65
            },
            {
                id: 'tech-hypocrisy',
                title: 'Hipocresía tecnológica',
                description: `<p>La crítica surge de una aparente paradoja: usar herramientas tecnológicas avanzadas (IA) para rebelarse contra un sistema educativo que, a su vez, se basa en formar trabajadores para un mercado tecnocrático.</p>
                              <p>Sin embargo, no es hipocresía sino un acto de sabotaje inteligente:</p>
                              <ul>
                                <li>"Usar las armas del enemigo": Similar a cómo los movimientos sociales utilizan redes sociales corporativas para organizar protestas</li>
                                <li>WorkerMan convierte la IA en un "virus": en vez de entrenar para servir a máquinas, las máquinas sirven para liberar tiempo humano</li>
                                <li>La tecnología nunca es neutral: puede ser opresiva (vigilancia) o subversiva (liberación de tiempo)</li>
                                <li>Desvía el propósito original: en lugar de optimizar la productividad esclava, optimiza la autonomía vital</li>
                              </ul>
                              <p>"No es hipocresía: es piratear el barco del sistema para navegar hacia aguas libres".</p>
                              <p>La verdadera hipocresía es que el sistema eduque con tecnología pero castigue a quien la use para pensar. WorkerMan no es el problema: es el antídoto tecnológico que el sistema nunca quiso que existiera.</p>`,
                weight: 0.85
            }
        ];

        // Configuración del lienzo para conexiones
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;
        let isDragging = false;
        let lastMouseX, lastMouseY;
        let offsetX = 0, offsetY = 0;
        
        // Variables para movimiento suave
        let targetOffsetX = 0, targetOffsetY = 0;
        let currentVelocityX = 0, currentVelocityY = 0;
        const smoothingFactor = 0.15; // Factor de suavizado (0-1)
        
        // Variables para zoom
        let scale = 1;
        let targetScale = 1;
        const zoomSpeed = 0.1;
        const minZoom = 0.5;
        const maxZoom = 2.0;
        
        // Almacenar la posición del mouse para efectos de movimiento asimétrico
        let mouseX = 0, mouseY = 0;
        
        // Registro del tiempo de inicio para efectos de animación
        const startTime = Date.now() * 0.001; // Convertido a segundos
        
        // Matriz de conexiones entre conceptos (para definir relaciones)
        const connections = [];
        
        // Generar matriz de conexiones aleatoria basada en pesos
        function generateConnections() {
            // Limpiar conexiones previas
            connections.length = 0;
            
            // Para cada par de conceptos, determinar si están conectados
            for (let i = 0; i < concepts.length; i++) {
                connections[i] = [];
                for (let j = 0; j < concepts.length; j++) {
                    if (i !== j) {
                        // Calcular la probabilidad de conexión basada en los pesos
                        const probability = (concepts[i].weight + concepts[j].weight) / 2;
                        connections[i][j] = Math.random() < probability * 0.7;
                    } else {
                        connections[i][j] = false;
                    }
                }
            }
            
            // Asegurar que todos los conceptos tengan al menos una conexión
            for (let i = 0; i < concepts.length; i++) {
                let hasConnection = false;
                for (let j = 0; j < concepts.length; j++) {
                    if (connections[i][j]) {
                        hasConnection = true;
                        break;
                    }
                }
                
                if (!hasConnection) {
                    // Conectar con un nodo aleatorio
                    const randomIndex = Math.floor(Math.random() * concepts.length);
                    if (randomIndex !== i) {
                        connections[i][randomIndex] = true;
                    }
                }
            }
        }
        
        // Redimensionar lienzo en cambio de tamaño de ventana
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            drawConnections();
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // Crear elementos de concepto con posiciones específicas
        const conceptPositions = [];
        const conceptVelocities = [];
        
        // Función para crear elementos de concepto
        function createConceptElements() {
            const container = document.getElementById('mindmap-container');
            
            // Eliminar elementos de concepto existentes
            document.querySelectorAll('.concept').forEach(el => el.remove());
            
            // Calcular posiciones si es primera vez
            if (conceptPositions.length === 0) {
                generateConnections();
                
                // Calculate initial positions for all concepts
                const initialPositions = [];
                
                concepts.forEach((concept, index) => {
                    // Posicionar conceptos alrededor del centro en un patrón irregular
                    const angle = (index / concepts.length) * Math.PI * 2;
                    
                    // Crear una distribución elíptica (más compacta horizontalmente y más alta verticalmente)
                    // Reduced by 20% to make distribution area smaller
                    const horizontalScale = 3.0; // Reduced from 3.75 (20% smaller)
                    
                    // Base radius ajustado para la nueva distribución más equilibrada
                    // Usar un radio base ligeramente mayor para compensar la forma más vertical
                    // Reduced by 20% to make distribution area smaller
                    const baseRadius = window.innerHeight * 0.28; // Reduced from 0.35 (20% smaller)
                    const radius = baseRadius * (0.6 + (1 - concept.weight) * 0.7); // Ajustar diferenciación por peso
                    
                    // Añadir más aleatoriedad a las posiciones para una distribución más natural
                    const randomAngle = angle + (Math.random() * 0.3 - 0.15);
                    
                    // Calcular posición con estiramiento vertical (forma elíptica más alta que ancha)
                    const xRadius = radius * horizontalScale; // Radio X reducido para distribución horizontal más compacta
                    const yRadius = radius * 1.3 * 0.8 * 1.5; // Increased by 50% vertically
                    
                    // Añadir variación para una distribución natural en ambos ejes
                    const xRandomFactor = 0.9 + Math.random() * 0.2; // ±10% variación horizontal (aumentada para mejor separación horizontal)
                    const yRandomFactor = 0.85 + Math.random() * 0.3; // ±15% variación vertical (optimizada para la nueva forma)
                    
                    const randomXRadius = xRadius * xRandomFactor;
                    const randomYRadius = yRadius * yRandomFactor;
                    
                    initialPositions.push({
                        x: Math.cos(randomAngle) * randomXRadius,
                        y: Math.sin(randomAngle) * randomYRadius,
                        angle: randomAngle,
                        radius: radius, // Guardar radio base para referencia
                        weight: concept.weight // Store weight for collision size adjustment
                    });
                });
                
                // Apply a minimum distance constraint between concepts
                // Each concept gets a "personal space" based on its importance
                const minDistanceFactor = window.innerHeight * 0.15; // Minimum distance between concepts
                const maxIterations = 50; // Maximum iterations to prevent infinite loops
                
                // Collision resolution function
                function resolveCollisions(positions) {
                    let hasCollisions = true;
                    let iteration = 0;
                    
                    while (hasCollisions && iteration < maxIterations) {
                        hasCollisions = false;
                        iteration++;
                        
                        // Check each pair of concepts for collisions
                        for (let i = 0; i < positions.length; i++) {
                            for (let j = i + 1; j < positions.length; j++) {
                                const pos1 = positions[i];
                                const pos2 = positions[j];
                                
                                // Calculate distance between concepts
                                const dx = pos2.x - pos1.x;
                                const dy = pos2.y - pos1.y;
                                const distance = Math.sqrt(dx * dx + dy * dy);
                                
                                // Calculate minimum allowed distance based on concept weights
                                const minDistance = minDistanceFactor * (0.5 + (pos1.weight + pos2.weight) / 2);
                                
                                // If too close, push them apart
                                if (distance < minDistance) {
                                    hasCollisions = true;
                                    
                                    // Calculate repulsion force
                                    const overlap = minDistance - distance;
                                    const angle = Math.atan2(dy, dx);
                                    
                                    // Move proportional to weights (lighter concepts move more)
                                    const totalWeight = pos1.weight + pos2.weight;
                                    const moveRatio1 = (1 - pos1.weight / totalWeight) * 0.6; // More influential concept moves less
                                    const moveRatio2 = (1 - pos2.weight / totalWeight) * 0.6;
                                    
                                    // Apply push forces
                                    pos1.x -= Math.cos(angle) * overlap * moveRatio1;
                                    pos1.y -= Math.sin(angle) * overlap * moveRatio1;
                                    pos2.x += Math.cos(angle) * overlap * moveRatio2;
                                    pos2.y += Math.sin(angle) * overlap * moveRatio2;
                                }
                            }
                        }
                    }
                    
                    return positions;
                }
                
                // Apply collision resolution and copy to final positions
                const resolvedPositions = resolveCollisions(initialPositions);
                
                // Copy resolved positions to the main position arrays
                resolvedPositions.forEach(pos => {
                    conceptPositions.push({
                        x: pos.x,
                        y: pos.y,
                        angle: pos.angle,
                        radius: pos.radius
                    });
                    
                    // Establecer velocidades a cero para evitar cualquier movimiento automático
                    conceptVelocities.push({
                        x: 0,
                        y: 0,
                        angle: 0,
                        speed: 0 // Sin velocidad para evitar oscilaciones
                    });
                });
            }
            
            // Crear nuevos elementos con el desplazamiento actual
            concepts.forEach((concept, index) => {
                const element = document.createElement('div');
                element.classList.add('concept');
                element.id = concept.id;
                
                // Use language-specific title if available, otherwise fallback
                const titleKey = `title_${currentLanguage}`;
                element.textContent = concept[titleKey] || concept.title || concept.title_es;
                
                element.dataset.index = index;
                
                // Ajustar el tamaño según el peso/importancia - diferencia extrema entre tamaños
                // Conceptos menos importantes mucho más pequeños, importantes más grandes
                // Increased all concepts by 20% 
                const scaleFactor = (0.4 + (concept.weight * 1.6)) * 1.2;
                
                const position = conceptPositions[index];
                const x = centerX + position.x * scale + offsetX;
                const y = centerY + position.y * scale + offsetY;
                
                element.style.left = `${x}px`;
                element.style.top = `${y}px`;
                element.style.transform = `scale(${scaleFactor})`; // Tamaño basado en importancia
                
                // Aplicar clase especial para "Únete Ahora"
                if (concept.isSpecial) {
                    element.classList.add('special');
                }
                
                // Simplificar - solo tratar de manera especial el "Join Now"
                // Todos los demás conceptos no tienen estilos adicionales, solo la variación por tamaño
                
                // Añadir evento clic para mostrar contenido
                element.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showConceptContent(concept);
                });
                
                container.appendChild(element);
            });
            
            drawConnections();
        }
        
        // Contar número de conexiones para un concepto
        function countConnections(index) {
            let count = 0;
            for (let i = 0; i < concepts.length; i++) {
                if (connections[index][i]) {
                    count++;
                }
            }
            return count;
        }
        
        // Dibujar conexiones entre conceptos
        function drawConnections() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Dibujar conexiones basadas en la matriz de conexiones
            const conceptElements = document.querySelectorAll('.concept');
            
            // Primero dibujar conexiones entre conceptos
            for (let i = 0; i < conceptElements.length; i++) {
                const element = conceptElements[i];
                const rect = element.getBoundingClientRect();
                const elementX = rect.left + rect.width / 2;
                const elementY = rect.top + rect.height / 2;
                
                for (let j = 0; j < conceptElements.length; j++) {
                    if (connections[i][j]) {
                        const otherElement = conceptElements[j];
                        const otherRect = otherElement.getBoundingClientRect();
                        const otherX = otherRect.left + otherRect.width / 2;
                        const otherY = otherRect.top + otherRect.height / 2;
                        
                        // Calcular opacidad basada en la distancia - aumentar la opacidad un 70%
                        const distance = Math.sqrt(Math.pow(elementX - otherX, 2) + Math.pow(elementY - otherY, 2));
                        const maxDistance = Math.min(window.innerWidth, window.innerHeight) * 1.2;
                        // Aumentar opacidad base en un 70%
                        const opacity = (0.05 + 0.05 * (1 - Math.min(distance / maxDistance, 1))) * 1.7;
                        
                        ctx.beginPath();
                        ctx.moveTo(elementX, elementY);
                        ctx.lineTo(otherX, otherY);
                        ctx.strokeStyle = `rgba(255, 255, 255, ${opacity})`;
                        ctx.lineWidth = 0.5;
                        ctx.stroke();
                    }
                }
            }
            
            // Luego dibujar conexiones al centro
            for (let i = 0; i < conceptElements.length; i++) {
                const element = conceptElements[i];
                const rect = element.getBoundingClientRect();
                const elementX = rect.left + rect.width / 2;
                const elementY = rect.top + rect.height / 2;
                
                // Calcular opacidad basada en el peso del concepto - aumentar para las líneas centrales
                const opacity = (0.05 + concepts[i].weight * 0.05) * 1.7;
                
                ctx.beginPath();
                ctx.moveTo(elementX, elementY);
                ctx.lineTo(centerX, centerY);
                ctx.strokeStyle = `rgba(255, 255, 255, ${opacity})`;
                ctx.lineWidth = concepts[i].weight * 0.8;
                ctx.stroke();
            }
        }
        
        // Mostrar contenido del concepto en modal
        function showConceptContent(concept) {
            // Use language-specific title and description
            const titleKey = `title_${currentLanguage}`;
            const descriptionKey = `description_${currentLanguage}`;
            
            document.getElementById('modal-title').textContent = concept[titleKey] || concept.title || concept.title_es;
            document.getElementById('modal-content').innerHTML = concept[descriptionKey] || concept.description || concept.description_es;
            
            document.getElementById('content-modal').style.display = 'block';
            document.getElementById('backdrop').style.display = 'block';
            
            // Resaltar concepto activo
            document.querySelectorAll('.concept').forEach(el => {
                el.classList.remove('active');
            });
            document.getElementById(concept.id).classList.add('active');
            
            // Concept movement on click feature removed
        }
        
        // Cerrar modal
        document.getElementById('modal-close').addEventListener('click', () => {
            document.getElementById('content-modal').style.display = 'none';
            document.getElementById('backdrop').style.display = 'none';
            
            // Eliminar resaltado
            document.querySelectorAll('.concept').forEach(el => {
                el.classList.remove('active');
            });
        });
        
        document.getElementById('backdrop').addEventListener('click', () => {
            document.getElementById('content-modal').style.display = 'none';
            document.getElementById('backdrop').style.display = 'none';
            
            // Eliminar resaltado
            document.querySelectorAll('.concept').forEach(el => {
                el.classList.remove('active');
            });
        });
        
        // Funcionalidad de búsqueda
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        
        searchInput.addEventListener('input', () => {
            const query = searchInput.value.toLowerCase();
            
            // Use language-specific title and description fields for search
            const titleKey = `title_${currentLanguage}`;
            const descriptionKey = `description_${currentLanguage}`;
            
            const results = concepts.filter(concept => {
                // Check both language-specific fields and fallback fields
                const title = concept[titleKey] || concept.title || concept.title_es || '';
                const desc = concept[descriptionKey] || concept.description || concept.description_es || '';
                
                return title.toLowerCase().includes(query) || desc.toLowerCase().includes(query);
            });
            
            displaySearchResults(results);
        });
        
        function displaySearchResults(results) {
            searchResults.innerHTML = '';
            
            if (results.length > 0 && searchInput.value.trim() !== '') {
                results.forEach(result => {
                    const resultItem = document.createElement('div');
                    resultItem.classList.add('search-result');
                    
                    // Use language-specific title
                    const titleKey = `title_${currentLanguage}`;
                    resultItem.textContent = result[titleKey] || result.title || result.title_es;
                    
                    resultItem.addEventListener('click', () => {
                        showConceptContent(result);
                        searchResults.style.display = 'none';
                        searchInput.value = '';
                    });
                    searchResults.appendChild(resultItem);
                });
                searchResults.style.display = 'block';
            } else {
                searchResults.style.display = 'none';
            }
        }
        
        // Cerrar resultados de búsqueda al hacer clic fuera
        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
                searchResults.style.display = 'none';
            }
        });
        
        // Seguimiento de posición del mouse para zoom
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });
        
        // Funcionalidad de arrastre más suave
        document.addEventListener('mousedown', (e) => {
            if (!e.target.closest('.concept') && 
                !e.target.closest('#content-modal') && 
                !e.target.closest('#search-container') &&
                !e.target.closest('#zoom-controls')) {
                isDragging = true;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                
                // Detener cualquier movimiento de inercia
                currentVelocityX = 0;
                currentVelocityY = 0;
                
                // Cambiar estilo del cursor
                document.body.style.cursor = 'grabbing';
            }
        });
        
        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                
                // Actualizar la posición objetivo directamente
                targetOffsetX += deltaX;
                targetOffsetY += deltaY;
                
                // Actualizar velocidad actual
                currentVelocityX = deltaX * 0.8 + currentVelocityX * 0.2;
                currentVelocityY = deltaY * 0.8 + currentVelocityY * 0.2;
                
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
            }
        });
        
        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                
                // Restaurar el cursor
                document.body.style.cursor = 'grab';
                
                // Sin inercia ni efecto rebote
                currentVelocityX = 0;
                currentVelocityY = 0;
            }
        });
        
        // Eliminar la animación inicial
        let isInitialLoad = false;
        
        // Funcionalidad de zoom con rueda del mouse
        document.addEventListener('wheel', (e) => {
            e.preventDefault();
            
            const delta = -Math.sign(e.deltaY) * zoomSpeed;
            const newScale = Math.max(minZoom, Math.min(maxZoom, targetScale + delta));
            
            if (newScale !== targetScale) {
                // Calcular ajuste de desplazamiento para zoom centrado en el cursor
                const rect = canvas.getBoundingClientRect();
                const mouseXRelativeToCenterBeforeZoom = (e.clientX - rect.left) - centerX;
                const mouseYRelativeToCenterBeforeZoom = (e.clientY - rect.top) - centerY;
                
                // Calcular nuevo desplazamiento para mantener el cursor en la misma posición
                const scaleFactor = newScale / targetScale;
                const newOffsetX = targetOffsetX - mouseXRelativeToCenterBeforeZoom * (scaleFactor - 1);
                const newOffsetY = targetOffsetY - mouseYRelativeToCenterBeforeZoom * (scaleFactor - 1);
                
                targetScale = newScale;
                targetOffsetX = newOffsetX;
                targetOffsetY = newOffsetY;
                
                // Actualizar la visualización del nivel de zoom
                updateZoomLevel();
            }
        }, { passive: false });
        
        // Botones de zoom
        document.getElementById('zoom-in').addEventListener('click', () => {
            const newScale = Math.min(maxZoom, targetScale + zoomSpeed);
            if (newScale !== targetScale) {
                targetScale = newScale;
                updateZoomLevel();
            }
        });
        
        document.getElementById('zoom-out').addEventListener('click', () => {
            const newScale = Math.max(minZoom, targetScale - zoomSpeed);
            if (newScale !== targetScale) {
                targetScale = newScale;
                updateZoomLevel();
            }
        });
        
        // Actualizar visualización del nivel de zoom
        function updateZoomLevel() {
            document.getElementById('zoom-level').textContent = `${Math.round(targetScale * 100)}%`;
        }
        
        // Eliminar el efecto de sacudida para mantener las posiciones estables
        function applyShakeEffect() {
            // No hacer nada - mantener posiciones estables
        }
        
        // Variables para posiciones de los conceptos
        let activeConceptIndex = -1;
        
        // Función para permitir arrastrar los conceptos individualmente
        function enableConceptDrag() {
            concepts.forEach((concept, index) => {
                const element = document.getElementById(concept.id);
                if (element) {
                    let isDraggingConcept = false;
                    let dragStartX, dragStartY;
                    let originalX, originalY;
                    
                    element.addEventListener('mousedown', (e) => {
                        if (e.button === 0) { // Solo botón izquierdo
                            e.stopPropagation();
                            isDraggingConcept = true;
                            dragStartX = e.clientX;
                            dragStartY = e.clientY;
                            originalX = conceptPositions[index].x;
                            originalY = conceptPositions[index].y;
                            activeConceptIndex = index;
                            
                            // Cambiar el cursor
                            element.style.cursor = 'grabbing';
                        }
                    });
                    
                    document.addEventListener('mousemove', (e) => {
                        if (isDraggingConcept && activeConceptIndex === index) {
                            const deltaX = (e.clientX - dragStartX) / scale;
                            const deltaY = (e.clientY - dragStartY) / scale;
                            
                            // Actualizar posición con límites para evitar que se vaya muy lejos
                            const maxMove = window.innerWidth * 0.3 / scale;
                            const newX = Math.max(-maxMove, Math.min(maxMove, originalX + deltaX));
                            const newY = Math.max(-maxMove, Math.min(maxMove, originalY + deltaY));
                            
                            conceptPositions[index].x = newX;
                            conceptPositions[index].y = newY;
                        }
                    });
                    
                    document.addEventListener('mouseup', () => {
                        if (isDraggingConcept && activeConceptIndex === index) {
                            isDraggingConcept = false;
                            activeConceptIndex = -1;
                            
                            // Restaurar cursor
                            element.style.cursor = 'pointer';
                        }
                    });
                }
            });
        }
        
        // Actualizar posiciones sin animaciones ni colisiones dinámicas
        function updatePositions() {
            // Actualizar escala con suavidad
            scale += (targetScale - scale) * 0.1;
            
            // Calcular diferencia entre posición actual y objetivo
            const deltaX = targetOffsetX - offsetX;
            const deltaY = targetOffsetY - offsetY;
            
            // Aplicar suavizado
            offsetX += deltaX * smoothingFactor;
            offsetY += deltaY * smoothingFactor;
            
            // Actualizar posiciones estáticas de los conceptos
            concepts.forEach((concept, index) => {
                const element = document.getElementById(concept.id);
                if (element) {
                    const position = conceptPositions[index];
                    
                    // Mantener posiciones estáticas sin "respiración" ni colisiones
                    // Posiciones permanecen sin cambios
                    
                    // Ajustar el tamaño según la importancia/peso
                    const scaleFactor = (0.8 + (concept.weight * 0.4)) * 1.2;
                    
                    // Aplicar la posición actualizada sin transiciones animadas
                    const screenX = centerX + position.x * scale + offsetX;
                    const screenY = centerY + position.y * scale + offsetY;
                    
                    // Sin transiciones para movimientos instantáneos
                    element.style.transition = "none";
                    element.style.left = `${screenX}px`;
                    element.style.top = `${screenY}px`;
                    element.style.transform = `scale(${scaleFactor * scale})`;
                }
            });
            
            drawConnections();
            requestAnimationFrame(updatePositions);
        }
        
        // Update UI language elements
        function updateLanguageUI() {
            // Update search placeholder
            document.getElementById('search-input').placeholder = uiTranslations[currentLanguage].searchPlaceholder;
        }
        
        // Add language toggle functionality
        document.getElementById('lang-btn').addEventListener('click', () => {
            currentLanguage = currentLanguage === 'es' ? 'en' : 'es';
            
            // Update document language attribute
            document.documentElement.lang = currentLanguage;
            
            // Update UI elements
            updateLanguageUI();
            
            // Refresh concept elements with new language
            createConceptElements();
        });
        
        // Inicializar el mapa mental
        createConceptElements();
        enableConceptDrag(); // Habilitar la función de arrastre de conceptos
        updatePositions();
        updateZoomLevel();
        updateLanguageUI();
    </script>
</body>
</html>